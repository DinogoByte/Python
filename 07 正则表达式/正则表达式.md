正则表达式
-
### 基本知识

#### 定义：
正则表达式是一种用来匹配字符串的强有力的武器。它的设计思想是用一种描述性的语言来给字符串定义一个规则，凡是符合规则的字符串，我们就认为它“匹配”了，否则，该字符串就是不合法的。

#### 常用匹配规则：
| 模 式 | 描 述                         | 示 例 | 说 明 |
| --- | --------------------------------| ----------------------- | ----------- |
| .      | 匹配任意字符，不包括换行符           | b.t                    | 可以匹配bat / but / b#t / b1t / b_1 等 |
| \w     | 匹配字母、数字及下划线              | b\wt                   | 可以匹配bat / b1t / b_t ,不能匹配b#t |
| \W     | 匹配不是字母、数组及下划线的字符      | b\Wt                   | 可以匹配b#t / b@t等，但不能匹配but / b1t / b_t等 |
| \s     | 匹配空白字符，等价于 [\t\n\r\f]     | love\syou              | 可以匹配love you |
| \S     | 匹配非空白字符	                    | love\Syou              | 可以匹配love#you等,但不能匹配love you |
| \d     | 匹配任意数字，等价于 [0-9]          | \d\d                   | 可以匹配01 / 23 / 99等 |
| \D     | 匹配任意非数字的字符                | \d\D                    | 可以匹配9a / 3# / 0F等 |
| \b     | 匹配单词的边界(\b的前后位置不全是\w)  | hello world  \bworld\b |  可以匹配到world |
| \B     | 匹配非单词边界(\B的前后位置全是\w)   | helloworld  \Bworld\b   | 可以匹配到world |
| ^      | 匹配一行字符串的开头                | ^The                   | 可以匹配The开头的字符串 |
| $      | 匹配一行字符串的结尾                | .exe$                  | 可以匹配.exe结尾的字符串 |
| []     | 用来表示一组字符，单独列出           | [amk]                  | 可以匹配到 a、m 或 k |
| [^]    | 不在 [] 中的字符                   | [^abc]                 | 可以匹配除了 a、b、c 之外的字符 |
| *      | 匹配0次或多次                      | \w*                    | |
| +      | 匹配1次或多次                      | \w+                    | |
| ?      | 匹配0次或1次                       | \w?                    | |
| &#124; | 或                                | a &#124; b             ||
|{N}     | 匹配N次                           | \w{3}                  | |
|{M,}    | 匹配至少M次                        | \w{3,}                 | |
|{M,N}   | 匹配至少M次至多N次                  | \w{3,6}                | |
|()      | 匹配括号内的表达式，也表示一个组       | (\d{3})-(\d{3,8})     | |
| *?     | 重复任意次，但尽可能少重复            | a.*b , a.*?b           | 将正则表达式应用于aabab，前者会匹配整个字符串aabab，后者会匹配aab和ab两个字符串 |
| +?     | 重复1次或多次，但尽可能少重复         | ||
| ??     | 重复0次或1次，但尽可能少重复          | ||
| {M,N}? | 重复M到N次，但尽可能少重复            |||
| {M,}?  | 	重复M次以上，但尽可能少重复          |||
| (?&lt;name&gt;exp) | 匹配exp并捕获到名为name的组中 |(?P&lt;province&gt;\d{3})||


**说明**： 如果需要匹配的字符是正则表达式中的特殊字符，那么可以使用\进行转义处理，例如想匹配小数点可以写成\.就可以了，因为直接写.会匹配任意字符；同理，想匹配圆括号必须写成\(和\)，否则圆括号被视为正则表达式中的分组。

#### 优先级
| 排列 | 原子与操作符优先级	|（从高到低）|
| -------- | --------------------------| ---------- |
|1 | 转义符号 (Escaping Symbol)	| \ |
|2 | 分组、捕获 (Grouping or Capturing)	| (...) (?:...) (?=...) (?!...) (?<=...) (?<!...) |
|3 | 数量 (Quantifiers)	| a* a+ a? a{n, m} |
|4 | 序列与定位（Sequence and Anchor）	| abc ^ $ \b \B |
|5 | 或（Alternation）	| a &#124; b &#124; c |
|6 | 原子 (Atoms)	| a [^abc] \t \r \n \d \D \s \S \w \W . |

### Python中的正则匹配 (正则匹配默认是贪婪匹配)
Python提供了re模块来支持正则表达式相关操作，下面是re模块中的核心函数。

| 函数 |	说明 |
| -------- | ----------- |
|compile(pattern, flags=0)	| 编译正则表达式返回正则表达式对象 |
|match(pattern, string, flags=0) | 用正则表达式匹配字符串 成功返回匹配对象 否则返回None |
|search(pattern, string, flags=0) | 搜索字符串中第一次出现正则表达式的模式 成功返回匹配对象 否则返回None |
|split(pattern, string, maxsplit=0, flags=0) | 用正则表达式指定的模式分隔符拆分字符串 返回列表,maxsplit表示分割次数,默认为0(即不限次数) |
|sub(pattern, repl, string, count=0, flags=0) | 用指定的字符串替换原字符串中与正则表达式匹配的模式 可以用count指定替换的次数 |
|fullmatch(pattern, string, flags=0) | match函数的完全匹配（从字符串开头到结尾）版本 |
|findall(pattern, string, flags=0) | 查找字符串所有与正则表达式匹配的模式 返回字符串的列表 |
|finditer(pattern, string, flags=0) | 查找字符串所有与正则表达式匹配的模式 返回一个迭代器 |
|purge() | 清除隐式编译的正则表达式的缓存 |
|re.I / re.IGNORECASE | 忽略大小写匹配标记 |
|re.M / re.MULTILINE | 多行匹配标记 |

### 修饰符flags
| 修饰符	 |描述 |
| ------ | ---- |
| re.I	 | 使匹配对大小写不敏感 |
| re.L	 | 做本地化识别（locale-aware）匹配 |
| re.M	 | 多行匹配，影响 ^ 和 $ |
| re.S	 | 使 . 匹配包括换行在内的所有字符 |
| re.U	 | 根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B. |
| re.X	 | 该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。 |


match / fullmatch / search / findall 区别：
- match： 从搜索文本的开始位置查找模式串对应匹配样式，注意是必须是开始位置就能匹配。
- fullmatch： 整个搜索文本与模式串全完全匹配，就是从头匹配到尾
- search：扫描整个搜索文本 找到模式串对应匹配样式的第一个位置
- findall: 正则表达式没有括号正常匹配，有多个括号就会返回多个括号分别匹配到的结果，[('010', '12'), ('232', '32')]

常用的正则表达式：
- https://c.runoob.com/front-end/854






















